{% extends 'base.html.twig' %}

{% block title %}Ajouter un produit
{% endblock %}

{% block body %}
	<div class="container admin-container" style="margin-top: 3rem; margin-bottom: 5rem;">
		<div class="admin-header" style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 3rem;">
			<div>
				<nav aria-label="breadcrumb">
					<ol style="list-style: none; padding: 0; display: flex; gap: 0.5rem; font-size: 0.9rem; margin-bottom: 0.5rem;">
						<li>
							<a href="{{ path('app_admin_products') }}" style="color: var(--color-primary); text-decoration: none;">Produits</a>
						</li>
						<li style="color: var(--color-text-light);">/</li>
						<li style="color: var(--color-text-light);">Nouveau</li>
					</ol>
				</nav>
				<h1 style="font-size: 2.8rem; font-weight: 800; color: var(--color-dark); margin: 0; letter-spacing: -1px;">
					Nouveau
					<span style="color: var(--color-primary);">produit</span>
				</h1>
			</div>
			<a href="{{ path('app_admin_products') }}" class="btn btn-secondary" style="border-radius: 12px; padding: 0.8rem 1.5rem; display: flex; align-items: center; gap: 0.5rem; background: #f0f0f0; color: #333; border: 1px solid #ddd;">
				<i class="fas fa-arrow-left"></i>
				Retour
			</a>
		</div>

		<div style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.05); padding: 3rem; position: relative; overflow: hidden;">
			<div style="position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: linear-gradient(90deg, var(--color-primary), var(--color-accent));"></div>

			{{ form_start(form) }}
			<div style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 4rem;">
				<div class="form-sections">
					<section style="margin-bottom: 2.5rem;">
						<h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
							<div style="width: 32px; height: 32px; background: rgba(37, 99, 235, 0.1); color: var(--color-primary); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem;">1</div>
							Informations générales
						</h3>
						<div style="display: flex; flex-direction: column; gap: 1.5rem;">
							<div class="custom-form-row">
								{{ form_label(form.name) }}
								{{ form_widget(form.name, {'attr': {'style': 'border-radius: 12px; border: 2px solid #edf2f7; padding: 1rem; width: 100%; transition: all 0.3s; font-size: 1rem;'}}) }}
							</div>
							<div class="custom-form-row">
								{{ form_label(form.category) }}
								{{ form_widget(form.category, {'attr': {'style': 'border-radius: 12px; border: 2px solid #edf2f7; padding: 1rem; width: 100%; transition: all 0.3s; font-size: 1rem;'}}) }}
							</div>
							<div class="custom-form-row">
								{{ form_label(form.description) }}
								{{ form_widget(form.description, {'attr': {'style': 'border-radius: 12px; border: 2px solid #edf2f7; padding: 1rem; width: 100%; transition: all 0.3s; font-size: 1rem; min-height: 150px;'}}) }}
							</div>
						</div>
					</section>

					<section>
						<h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
							<div style="width: 32px; height: 32px; background: rgba(37, 99, 235, 0.1); color: var(--color-primary); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem;">2</div>
							Prix et Stock
						</h3>
						<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: start;">
							<div class="custom-form-row">
								{{ form_label(form.price) }}
								<div style="position: relative;">
									{{ form_widget(form.price, {'attr': {'style': 'border-radius: 12px; border: 2px solid #edf2f7; padding: 1rem; width: 100%; transition: all 0.3s; font-size: 1rem;'}}) }}
								</div>
							</div>
							<div class="custom-form-row">
								{{ form_label(form.stock) }}
								<div style="position: relative;">
									{{ form_widget(form.stock, {'attr': {'style': 'border-radius: 12px; border: 2px solid #edf2f7; padding: 1rem; width: 100%; transition: all 0.3s; font-size: 1rem;'}}) }}
								</div>
							</div>
						</div>
					</section>
				</div>

				<div class="image-upload-section">
					<section style="background: #f8fafc; border-radius: 20px; padding: 2rem; height: 100%;">
						<h3 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
							<i class="fas fa-image" style="color: var(--color-primary);"></i>
							Image du produit
						</h3>

						<div style="margin-bottom: 2rem; position: relative; aspect-ratio: 1; border-radius: 16px; overflow: hidden; border: 2px dashed #cbd5e0; display: flex; align-items: center; justify-content: center; background: white;">
							<div style="text-align: center; color: #a0aec0;">
								<i class="fas fa-cloud-upload-alt" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
								<p style="font-size: 0.9rem;">Uploader une image</p>
							</div>
						</div>

						<div class="upload-control">
							{{ form_label(form.image, 'Choisir une image', {'label_attr': {'style': 'font-weight: 600; color: var(--color-dark); margin-bottom: 0.5rem; display: block;'}}) }}
							<div class="file-input-wrapper">
								{{ form_widget(form.image, {'attr': {'class': 'custom-file-input'}}) }}
							</div>
							<p style="font-size: 0.8rem; color: #718096; margin-top: 0.5rem;">
								Format recommandé : 1000x1000px, PNG ou JPG.
							</p>
						</div>
					</section>
				</div>
			</div>

			<div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid #edf2f7; display: flex; justify-content: flex-start; align-items: center;">
				<button type="submit" class="btn" style="background: var(--color-primary); color: white; padding: 1rem 2.5rem; border-radius: 14px; font-weight: 600; font-size: 1.1rem; box-shadow: 0 10px 15px rgba(37, 99, 235, 0.2); transition: all 0.3s; display: flex; align-items: center; gap: 0.75rem;">
					<i class="fas fa-plus"></i>
					Créer le produit
				</button>
			</div>
			{{ form_end(form) }}
		</div>
	</div>

	<style>
		.custom-form-row {
			display: flex;
			flex-direction: column;
		}
		
		.custom-form-row label {
			display: block;
			font-weight: 600;
			color: #2d3748;
			margin-bottom: 0.75rem;
			font-size: 0.95rem;
			height: auto;
		}

		input:focus,
		textarea:focus {
			border-color: var(--color-primary) !important;
			box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1) !important;
			outline: none;
		}

		.btn:hover {
			transform: translateY(-2px);
			filter: brightness(1.1);
		}

		.admin-container {
			animation: fadeIn 0.6s ease-out;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}
	</style>
{% endblock %}
